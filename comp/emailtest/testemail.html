<html>
    <head>
        <script data-require="angular.js@1.4.8" data-semver="1.4.8" src="https://code.angularjs.org/1.5.10/angular.js"></script>
        <script src="https://code.jquery.com/jquery-2.1.4.js" data-semver="2.1.4" data-require="jquery@*"></script>
        <script>
            (function () {
                angular.module('app', []);
                angular.module('app').controller("EmailController", [emailController]);

                function emailController() {
            		var vm = this;
                    vm.test = 'hello';
                }

                function sendTestEmail() {
                    fetch('https://ujknic9ujb.execute-api.us-east-1.amazonaws.com/default/lambda-sendemail-ses', {
                        method: 'POST',
                        mode: 'cors',
                        cache: 'no-cache',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            "toEmails": ["andrew.douglas11@gmail.com"],
                            "subject": "Indoor Competition Registration",
                            "message": JSON.stringify({
                                registration: {
                                    users: 1,
                                    totalCost: 2,
                                    paid: 3,
                                    acknowledge: 4
                                }
                            }, null, 2)
                        })
                    }).then(function() {
                        console.log('email sent successfully');
                    }).catch(function(err){
                        console.error('Error sending email: ' + err.message);
                    });
                }
            })();
        </script>
    </head>
    <body ng-app="app">
        <h1>This page is designed to test send email via AWS SES</h1>

        <div id="email-container" ng-controller="EmailController as vm">
            <button type="button" ng-click="vm.sendTestEmail()">Send Test Email</button>
            <br /><label>{{vm.test}}</label>
        </div>
    </body>
</html>